<?php

namespace Runalyze\Calculation\Elevation;

use PHPUnit\Framework\TestCase;

/**
 * Generated by PHPUnit_SkeletonGenerator 1.2.0 on 2014-11-29 at 13:31:05.
 */
class DistanceModifierTest extends TestCase {

	public function testSimpleModification() {
		$Modifier = new DistanceModifier(10, 200, 100);
		$Modifier->setCorrectionValues(+2, -1);

		$this->assertEqualsWithDelta(0.3, $Modifier->additionalDistance(), 1e-6);
		$this->assertEqualsWithDelta(10.3, $Modifier->correctedDistance(), 1e-6);
	}

	public function testNoModification() {
		$Modifier = new DistanceModifier(10);

		$this->assertEqualsWithDelta(0.0, $Modifier->additionalDistance(), 1e-6);
		$this->assertEqualsWithDelta(10.0, $Modifier->correctedDistance(), 1e-6);
	}

	public function testNegativeModification() {
		$Modifier = new DistanceModifier(10, 200, 500);
		$Modifier->setCorrectionValues(+2, -1);

		$this->assertEquals(-0.1, $Modifier->additionalDistance());
		$this->assertEqualsWithDelta(9.9, $Modifier->correctedDistance(), 1e-6);
	}

	public function testConfigurationSettings() {
		$VO2maxConfig = new \Runalyze\Configuration\Category\VO2max();
		$Modifier = new DistanceModifier(10, 100, 100, $VO2maxConfig);

		$addition = 0.1*$VO2maxConfig->correctionForPositiveElevation() + 0.1*$VO2maxConfig->correctionForNegativeElevation();

		$this->assertEquals($addition, $Modifier->additionalDistance());
		$this->assertEquals(10+$addition, $Modifier->correctedDistance());
	}

}
